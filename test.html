<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<style>
	.bar line {
		stroke: 'black';
		stroke-width: 1;
		opacity: 0.5;
	}
	</style>
</head>
<body>
    <div class='graph'></div>
	<script>
		var data = [
			{name: 'About', color: '#EC644B'},
			{name: 'Programming', color: '#86E2D5'},
			{name: 'Photography', color: '#66CC99'},
			{name: 'Music', color: '#FFCC80'},
			{name: 'Astronomy', color: '#AED581'},
			{name: 'Contact', color: '#BE90D4'}
		];

		var hoverEnter = function(d, i) {
			button = d3.select(this)
			button.append('circle')
				.moveToBack()
				.attr('class', 'filler')
				.style('fill', '#ffffff')
				.attr('r', radius*0.95)
				.transition().duration(200)
				.attr('r', radius*1.10)
			button.append('circle')
				.moveToBack()
				.attr('class', 'outer')
				.style('fill', function(d, i) {
					return d.color;
				})
				.attr('r', radius*0.95)
				.transition().duration(200)
				.attr('r', radius*1.20)
		}
		var hoverLeave = function(d, i) {
			button = d3.select(this)
			button.select('.filler')
				.transition().duration(200)
				.attr('r', radius*0.90)
				.remove()	
			button.select('.outer')
				.transition().duration(200)
				.attr('r', radius*0.90)
				.remove()
		}

		//size and margin
		var radius = 30,
		gap = 45,
		topmargin = 25,
		basewidth = (radius*2)*6 + gap*5 + 20,
		baseheight = topmargin*2 + radius*2,
		margin = {
			top: radius+topmargin,
			right: 10,
			bottom: 0,
			left:radius+10 
		},
		width = basewidth - margin.left - margin.right,
		height = baseheight - margin.top - margin.bottom;

		// main canvas
		var svg = d3.select('.graph')
		    .append('svg')
		    .attr('width', width + margin.left + margin.right)
		    .attr('height', height + margin.top + margin.bottom);
		var canvas = svg.append("g")
		    .attr("class", "margin")
		    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")	

		var menu = canvas.append('g')
			.attr('class', 'menu')
			.style('opacity', 0.75)

		var button = menu.selectAll('.class')
			.data(data)
			.enter()
			.append('g')
			.attr('class', 'button')
			.attr('id', function(d, i) {
				return d.name;
			})
			.style('opacity', 0)
			.attr("transform", function(d, i) {
				return "translate(" + (radius*2 + gap)*i + "," + radius*2 + ")"
			});

		button
			.append('circle')
			.attr('r', radius)
			.attr('fill', function(d, i) {
				return d.color;
			});

		button
			.on("mouseenter", hoverEnter)
			.on("mouseleave", hoverLeave)	

		button
			.transition()
			.delay( function(d, i) {
				return 1000 + 100*i;
			})
			.duration(1200)
			.ease(d3.easeElastic)
			.style('opacity', 1)
			.attr("transform", function(d, i) {
				return "translate(" + (radius*2 + gap)*i + "," + 0 + ")"
			});

		

		// https://github.com/wbkd/d3-extended
		d3.selection.prototype.moveToFront = function() {  
		  return this.each(function(){
			this.parentNode.appendChild(this);
		  });
		};
		d3.selection.prototype.moveToBack = function() {  
			return this.each(function() { 
				var firstChild = this.parentNode.firstChild; 
				if (firstChild) { 
					this.parentNode.insertBefore(this, firstChild); 
				} 
			});
		};


	</script>
</body>
</html>
