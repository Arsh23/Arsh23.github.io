<!DOCTYPE html>
<html lang="en">
<head>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=0.5">

	<link rel="stylesheet" 
   	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	crossorigin="anonymous">

	<style>
	@import url('https://fonts.googleapis.com/css?family=Roboto:100,400');

	html, body, .container {
		height: 100%;
	}

	line {
		stroke: black;
		stroke-width: 2;
		opacity: 0.5;
	}

	.desc {
		text-transform: uppercase;
		font-family: 'Roboto', sans-serif;
		font-size: 30px;
		font-weight: 100;
		letter-spacing: 6px;
		opacity: 0.75;
	}

	.menu-div {
		padding: 0px;
	}

	.content {
		height: calc(100% - 140px);
		padding-top: 8%;
	}

	.logo {
		transform: rotate(180deg);
		/*height: 200px;*/
		width: 200px;
	}

	.svg-img {
		width: 100%;
		height: auto;
	}

	/* Small Devices, Tablets */
	@media only screen and (max-width : 768px){
		.svg-img {
			max-height: 40vh;
		}
	}

	/* Extra Small Devices, Phones */
	@media only screen and (max-width : 480px){
		.svg-img {
			display: table;
			margin: auto;
			max-height: 40vh;
		}
	}

	</style>
</head>
<body>
    <div class='container'>
		<div class='row content'>
			<div class='content-programming'>
				<div class='col-sm-5 col-xs-12'>
					<object class='svg-img' type="image/svg+xml" data="svg/codelines.svg"></object>
				</div>
				<div class='col-sm-7 col-xs-12'>
				<p>
				Lorem ipsum dolor sit amet, consectetur adipiscing elit.
				Ratio quidem vestra sic cogit. Duo Reges: constructio interrete.
				Atque haec coniunctio confusioque virtutum tamen a philosophis ratione 
				quadam distinguitur. Sed in rebus apertissimis nimium longi sumus.
				Lorem ipsum dolor sit amet, consectetur adipiscing elit.
				Ratio quidem vestra sic cogit. Duo Reges: constructio interrete.
				Atque haec coniunctio confusioque virtutum tamen a philosophis ratione 
				quadam distinguitur. Sed in rebus apertissimis nimium longi sumus.
				Lorem ipsum dolor sit amet, consectetur adipiscing elit.
				Ratio quidem vestra sic cogit. Duo Reges: constructio interrete.
				Atque haec coniunctio confusioque virtutum tamen a philosophis ratione 
				quadam distinguitur. Sed in rebus apertissimis nimium longi sumus.
				</p>
				</div>
			</div>
		</div>
		<div class='row menu-div'></div>
	</div>


	<script>

		var active = -1;

		var removeCircles = function(button) {
			button.select('.filler')
				.transition().duration(200)
				.attr('r', radius*0.90)
				.remove()	
			button.select('.outer')
				.transition().duration(200)
				.attr('r', radius*0.90)
				.remove()	
		}

		var addCircles = function(button) {
			button.append('circle')
				.moveToBack()
				.attr('class', 'filler')
				.style('fill', '#ffffff')
				.attr('r', radius*0.95)
				.transition().duration(200)
				.attr('r', radius*1.10)
			button.append('circle')
				.moveToBack()
				.attr('class', 'outer')
				.style('fill', function(d, i) {
					return d.color;
				})
				.attr('r', radius*0.95)
				.transition().duration(200)
				.attr('r', radius*1.20)
		}

		var hoverEnter = function(d, i) {
			if(active != i) {
				addCircles(d3.select(this));
				if(active == -1) {
					d3.select('.desc')
						.text(function() {
							return d.name;
						})
				}
			}
		}
		var hoverLeave = function(d, i) {
			if(active != i) {
				removeCircles(d3.select(this));
				if(active == -1)
					d3.select('.desc').text('');
			}
		}

		var drawLines = function(x, y) {
			canvas.append('line')
				.attr('x1', x-15).attr('y1', y-radius-5)
				.attr('x2', x-25).attr('y2', y-radius-15)
			canvas.append('line')
				.attr('x1', x+15).attr('y1', y-radius-5)
				.attr('x2', x+25).attr('y2', y-radius-15)

			canvas.append('line')
				.attr('x1', x-25).attr('y1', y-radius-15)
				.attr('x2', 0+leftPadding/2).attr('y2', y-radius-15)
			canvas.append('line')
				.attr('x1', x+25).attr('y1', y-radius-15)
				.attr('x2', width-(leftPadding/2)).attr('y2', y-radius-15)
				
			canvas.append('line')
				.attr('x1', 0+leftPadding/2).attr('y1', y-radius-15)
				.attr('x2', 0+(leftPadding/2)-10).attr('y2', y-radius-25)
			canvas.append('line')
				.attr('x1', width-(leftPadding/2)).attr('y1', y-radius-15)
				.attr('x2', width-(leftPadding/2)+10).attr('y2', y-radius-25)
		}

		var buttonClick = function(d, i) {
			var g = d3.select(this);
			if(active == -1) {
				active = i;
			} else {
				if(active == i) {
					active = -1;
					d3.selectAll('line').remove()
					d3.select('.desc').text('');
					removeCircles(g);
					return;
				} else {
					d3.selectAll('line').remove()
					removeCircles(d3.select('#btn' + active));
					d3.select('.desc')
						.text(function() {
							return d.name;
						})
					active = i;
				}
			}
			var x = parseInt(g.attr("transform").split('(')[1].split(',')[0]);
			drawLines(x + radius, 0)
		}

		// https://github.com/wbkd/d3-extended
		d3.selection.prototype.moveToBack = function() {  
			return this.each(function() { 
				var firstChild = this.parentNode.firstChild; 
				if (firstChild) { 
					this.parentNode.insertBefore(this, firstChild); 
				} 
			});
		}
	</script>


	<script>
		var data = [
			{name: 'Programming', color: '#EC644B', icon: 'code'},
			{name: 'Photography', color: '#86E2D5', icon: 'technology-1'},
			{name: 'Music', color: '#66CC99', icon: 'drum-set-cartoon-variant'},
			{name: 'Astronomy', color: '#FFCC80', icon: 'transport'},
			{name: 'Contact', color: '#AED581', icon: 'social'},
			{name: 'Resume', color: '#BE90D4', icon: 'paper'}
		];

		//size and margin
		var radius = 30,
		div_width = parseInt(d3.select('.menu-div').style('width')),
		gap = 45,
		topMargin = 25,
		leftPadding = (div_width - ((radius*2)*6 + gap*5))/2,

		basewidth = (radius*2)*6 + gap*5 + leftPadding*2,
		baseheight = topMargin*3 + radius*2,

		margin = {
			top: radius+topMargin,
			right: 0,
			bottom: 0,
			left:0//radius 
		},
		width = basewidth - margin.left - margin.right,
		height = baseheight - margin.top - margin.bottom;
		d3.select('.content').style('padding-left', leftPadding/2 + 'px');
		d3.select('.content').style('padding-right', leftPadding/2 + 'px');

		// main canvas
		var svg = d3.select('.menu-div')
		    .append('svg')
		    .attr('width', width + margin.left + margin.right)
		    .attr('height', height + margin.top + margin.bottom)
			// .on("click", function(d, i) {
			// 	active = -1;	
			// });
		var canvas = svg.append("g")
		    .attr("class", "margin")
		    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")	

		var menu = canvas.append('g')
			.attr('class', 'menu')
			.style('opacity', 0.75)
		    .attr("transform", "translate(" + radius + ",0)")	

		canvas.append("text")
			.attr("class", "desc")
			.attr("x", width/2)
			.attr("y", height-10)
			.style("text-anchor", "middle")
			.text('')

		var button = menu.selectAll('.class')
			.data(data)
			.enter()
			.append('g')
			.attr('class', 'button')
			.attr('id', function(d, i) {
				return 'btn' + i;
			})
			.style('opacity', 0)
			.attr("transform", function(d, i) {
				return "translate(" + (leftPadding+((radius*2 + gap)*i)) + "," + radius*2 + ")"
			});

		button
			.append('circle')
			.attr('r', radius)
			.attr('fill', function(d, i) {
				return d.color;
			});

		button
			.append("svg:image")
			.attr("xlink:href", function(d, i) {
				return "svg/" + d.icon + ".svg";
			})
			.attr("width", radius*2 - 23)
			.attr("height", radius*2 - 23)
			.attr("x", -radius+11)
		  	.attr("y", -radius+11);

		button
			.on("mouseenter", hoverEnter)
			.on("mouseleave", hoverLeave)	
			.on("click", buttonClick)

		button
			.transition()
			.delay( function(d, i) {
				return 1000 + 100*i;
			})
			.duration(1200)
			.ease(d3.easeElastic)
			.style('opacity', 1)
			.attr("transform", function(d, i) {
				return "translate(" + (leftPadding+((radius*2 + gap)*i)) + "," + 0 + ")"
			});
	</script>
</body>
</html>
